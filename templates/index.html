<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>üìä –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>

    <button onclick="location.href='/parsing_stats'">üìë –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞</button>
    <button onclick="location.href='/parse_settings'">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞</button>
    <button onclick="location.href='/build_panel'">üõ† –ü–∞–Ω–µ–ª—å —Å–±–æ—Ä–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π</button>
    <button onclick="location.href='/sender_bot_settings'">ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è</button> <!-- –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ -->
    <button type="button" class="btn btn-success" onclick="startBot()">
        <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä
    </button>
    <div id="bot-status">
        <i class="fas fa-power-off"></i> –ü–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
    </div>
</div>

<script>
    function updateBotStatus() {
        fetch('/get_bot_status')
            .then(response => response.json())
            .then(data => {
                const statusDiv = document.getElementById('bot-status');
                if (data.running) {
                    statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ü–∞—Ä—Å–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç...';
                } else {
                    statusDiv.innerHTML = '<i class="fas fa-power-off"></i> –ü–∞—Ä—Å–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.';
                }
            });
    }

    function startBot() {
        fetch('/start_bot', { method: 'POST' })
            .then(response => {
                updateBotStatus(); // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞
            });
    }

    // –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    setInterval(updateBotStatus, 5000);
    updateBotStatus(); // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
</script>
</body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∞ -->
    <div class="logout-container">
        <button id="logout-btn">–í—ã–π—Ç–∏</button>
    </div>
    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (switch) –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
    <div class="theme-toggle-wrapper">
        <input type="checkbox" id="theme-toggle" class="theme-toggle" />
        <label for="theme-toggle" class="theme-toggle-label">
            <span class="theme-toggle-ball"></span>
        </label>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>