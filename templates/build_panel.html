  <!DOCTYPE html>
  <html lang="ru">
  <head>
      <meta charset="UTF-8">
      <title>–ü–∞–Ω–µ–ª—å —Å–±–æ—Ä–∫–∏</title>
      <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
      <style>
          body {
              font-family: Arial, sans-serif;
              background-color: #f8f9fa; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω */
              margin: 10px;
              padding: 0;
              text-align: center;
          }

          h1 {
              font-size: 18px;
              margin-bottom: 10px;
              color: #343a40; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç */
          }

          p a {
              text-decoration: none;
              background-color: #6c757d; /* –°–µ—Ä—ã–π —Ü–≤–µ—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ */
              color: white;
              padding: 6px 10px;
              border-radius: 5px;
              font-size: 12px;
          }

          table {
              width: 100%;
              border-collapse: collapse;
              font-size: 11px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
              background: white;
              border-radius: 8px;
              overflow: hidden;
              box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
              margin-bottom: 20px;
          }

          th, td {
              border: 1px solid #dee2e6; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
              padding: 6px; /* –£–º–µ–Ω—å—à–µ–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
              text-align: center;
          }

          th {
              background-color: #495057; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ */
              color: white;
              font-weight: bold;
          }

          tr:nth-child(even) {
              background-color: #f8f9fa; /* –°–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Ñ–æ–Ω –¥–ª—è —á–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫ */
          }

          tr:hover {
              background-color: #e9ecef; /* –°–µ—Ä—ã–π —Ñ–æ–Ω –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
          }

          .fixed-message {
              background-color: #fff3cd; /* –°–≤–µ—Ç–ª–æ-–∂–µ–ª—Ç—ã–π —Ñ–æ–Ω –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è */
              font-weight: bold;
          }

          button {
              background: none;
              border: none;
              cursor: pointer;
              font-size: 12px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
          }

          .edit-link {
              text-decoration: none;
              color: #0d6efd; /* –°–∏–Ω–∏–π —Ü–≤–µ—Ç –¥–ª—è —Å—Å—ã–ª–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */
              font-size: 12px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
              margin-right: 5px;
          }

          .delete-btn {
              color: #dc3545; /* –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è */
              font-size: 14px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ */
              transition: color 0.3s ease; /* –ü–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ */
          }

          .delete-btn:hover {
              color: #a71d2a; /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
          }

          .theme-toggle-wrapper {
              position: absolute;
              top: 10px;
              right: 10px;
          }

          .back-link {
              display: inline-block;
              margin-top: 10px;
              background-color: #e9ecef; /* –°–µ—Ä—ã–π —Ñ–æ–Ω */
              padding: 5px 10px;
              border: 1px solid #ced4da; /* –°–µ—Ä–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ */
              text-decoration: none;
              color: #495057; /* –¢–µ–º–Ω–æ-—Å–µ—Ä—ã–π —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
              border-radius: 5px;
          }

          .flashes {
              list-style: none;
              padding: 0;
              margin: 10px 0;
          }

          .flashes li {
              padding: 10px;
              margin: 5px 0;
              border-radius: 5px;
              font-size: 12px;
          }

          .flashes .success {
              background-color: #d4edda; /* –ó–µ–ª–µ–Ω—ã–π —Ñ–æ–Ω –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π */
              color: #155724; /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π —Ç–µ–∫—Å—Ç */
          }

          .flashes .error {
              background-color: #f8d7da; /* –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω –¥–ª—è –æ—à–∏–±–æ–∫ */
              color: #721c24; /* –¢–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç */
          }
      </style>
  </head>
  <body>

      <h1>üõ† –ü–∞–Ω–µ–ª—å —Å–±–æ—Ä–∫–∏</h1>

      <p><a href="{{ url_for('create_template') }}">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</a></p>

      <table>
          <thead>
              <tr>
                  <th>‚Ññ</th>
                  <th>–¢–∏–ø</th>
                  <th>–¢–µ–∫—Å—Ç</th>
                  <th>–û–∂–∏–¥–∞—Ç—å –æ—Ç–≤–µ—Ç?</th>
                  <th>–§–∞–π–ª</th>
                  <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
          </thead>
          <tbody>
          {% if all_templates %}
            {% for row in all_templates | sort(attribute='id') %}  <!-- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ id -->
              <tr class="{% if loop.index == 1 %}fixed-message{% endif %}">
                <td>{{ loop.index }}</td>
                <td>{{ row[1] }}</td>
                <td>{{ row[2] }}</td>
                <td>{{ "–î–∞" if row[3] else "–ù–µ—Ç" }}</td>
                <td>
                  {% if row[4] %}
                    {% set file_path = row[4] %}
                    {% set file_name = file_path.split('/')[-1] %} <!-- –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ -->
                    {{ file_name }}
                  {% else %}
                    ‚Äî
                  {% endif %}
                </td>
                <td>
                  <a href="{{ url_for('edit_template', iteration=row[0]) }}" class="edit-link">‚úèÔ∏è</a>
                  {% if loop.index != 1 %}
                  <form action="{{ url_for('delete_template_route', iteration=row[0]) }}" method="POST" class="delete-form" style="display:inline;">
                    <button type="submit" class="delete-btn" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Ññ{{ loop.index }}?');">üóë</button>
                  </form>
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          {% else %}
            <tr><td colspan="6">–ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π</td></tr>
          {% endif %}
          </tbody>
      </table>

      <br>
      <a href="/" class="back-link">‚Üê –ú–µ–Ω—é</a>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flashes">
            {% for category, message in messages %}
              <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      <div class="theme-toggle-wrapper">
          <input type="checkbox" id="theme-toggle" class="theme-toggle" />
          <label for="theme-toggle" class="theme-toggle-label">
              <span class="theme-toggle-ball"></span>
          </label>
      </div>

      <script src="{{ url_for('static', filename='script.js') }}"></script>

  </body>
  </html>